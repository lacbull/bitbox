<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Webapp Bot</title>
		<script src="https://telegram.org/js/telegram-web-app.js"></script>
        <!--<link rel="stylesheet" href="estilos.css">-->
		<script>
			let tlg= window.Telegram.WebApp;
			tlg.ready();
			tlg.expand();
			//---
			tlg.MainButton
				.setText('CLOSE WEBVIEW')
				.enable()
				.show()
				.onClick(function(){webviewClose();});
			//--
			// initialize the button
			/*const mainButton = window.Telegram.WebApp.MainButton;
			mainButton.text = "Save Preferences";
			mainButton.enable();
			mainButton.show();*/
			//---
			//let{id, first_name, last_name, username, language_code} = tlg.WebAppUser;//tlg.initDataUnsafe.user;
			//let{id, first_name, last_name, username, language_code} = tlg.WebAppInitData.user;
			//---------------------
			//let mostrar= document.querySelector('#mostrar');
			//---------------------
			//mostrar.addEventListener('click',mostrarDatos);
			
			function mostrarDatos(){
				document.getElementById("version").innerText= tlg.version;//localStorage.getItem('userid');
				//document.getElementById("user-id").innerText= id;//localStorage.getItem('userid');
				//document.getElementById("first-name").innerText= first_name;//localStorage.getItem('firstname');
				//document.getElementById("last-name").innerText= last_name; //localStorage.getItem('lastname');
				//document.getElementById("username").innerText= username;//localStorage.getItem('username');
				//document.getElementById("language-code").innerText= language_code;//localStorage.getItem('languagecode');
			}
			//----
			function toggleMainButton(el){
				const mainButton = tlg.MainButton;
				if (mainButton.isVisible) {
					mainButton.hide();
					el.innerHTML = 'Show Main Button';
				} else {
					mainButton.show();
					el.innerHTML = 'Hide Main Button';
				}
			}
			//----
			function webviewClose(){
				tlg.close();
			}
		</script>
    </head>
    <body>
		<section class="container">
			<h3>Web Bot</h3>
			<div id="mostrar" onclick="mostrarDatos()" class="mostrar-d">Pulsa para ver la version</div>
			<br>
			<div id="version"></div>
			<div id="user-id"></div>
			<h2 id="first-name"></h2>
			<h2 id="last-name"></h2>
			<h2 id="username"></h2>
			<h2 id="language-code"></h2>
		</section>
		<div>
			<button onclick="toggleMainButton(this)">Hide Main Button</button>
		</div>
	<!-- ------------------------------------------------------- -->
	</body>
</html>